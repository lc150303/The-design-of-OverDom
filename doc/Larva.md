# Larva 基因组
巢穴（Hive）和族群（Brood）控制 creep 时并不直接操作官方的 Creep 
对象，而是通过缓存的**控制对象**进行操作，控制对象与其控制的 creep 同名，控制对象中存储 creep 的名字、任务等信息。

Larva 基因组是 creep 的控制对象的基类。
## 工作流程
#### 创建
1. OverSeer 初始化时遍历所有活着的 creep， 整理成属于 OverLord 的和 WarLord，作为二者的初始化参数。（下面仅以 OverLord 分支作设计）
2. OverLord 把各房 creep 作为各 Hive 或者 Brood 的初始化参数。
3. Hive 或 Brood 根据建筑和矿点进行初始化，对应的管理对象发布第一批任务。
4. Hive 或 Brood 为活着的 creep 建立管理对象并全部置于激活态，遍历任务列表为一个执行者也没有的任务类型建立对应类型的管理对象。
#### 二态性
* **激活态**是管理对象处于 Hive 或 Brood 的激活集合中，也即对应的 creep 活着且已完成 spawn 倒计时，这些对象会被每 tick 运行
* **休眠态**是管理对象处于休眠集合中，对应的 creep 未安排出生或者在 spawn 倒计时中，这些对象不会被运行。休眠态的目的是
    1. 节省 spawn 倒计时中的无效动作开销
    2. 使得管理对象的工作代码中无需判断 creep 是否存在
    2. 接班时替换下来的死亡 creep 的管理对象可以缓存于此，下次接班时重复利用，节约创建对象的开销
* 状态转换
    * 休眠转激活：spawn 任务执行成功后往 Hive 或者 Brood 的事件队列中加入一个**在spawn倒计时结束时**激活对象的事件
    * 激活转休眠：Hive 监视 EventLog，出现死亡单位时调用同名 creep 对象的死亡处理函数；Brood 怎么获知死人了呢