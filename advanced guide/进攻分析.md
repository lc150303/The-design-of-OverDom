<img align="middle" src="./imgs/title.png">
  
QQ群：565401831  
游戏介绍及入手请移步：[hoho大佬简书教程](https://www.jianshu.com/p/5431cb7f42d3)  
[系列目录](https://zhuanlan.zhihu.com/p/104412058)  
Version：1.0  
Author：Scorpior

# Screeps 进攻策略分析

## 引言
Screeps 在我眼中是一个4X战略游戏，战斗是必不可少的环节，基于“进攻是最好的防守”原则，本篇将分析游戏中的进攻策略，并以此作为防御策略的基础。本篇将从战略视角分析我认为的 Screeps 中战争的三大要素，指出宏观上的战争目的与战争手段，而不过多涉及具体算法和代码。本篇会有许多新奇的游戏技巧。

“知可以战与不可以战者胜。”——《孙子兵法》

## 总则
目前 Screeps 中提供的能对敌方单位与敌方建筑造成伤害的方式有两类：核弹和带特点部件的 creep，这两类方法都会带来**能量**和**化合物**消耗。而 Screeps 中提供的防御手段主要也有两类：修墙和 rampart（下文简称 rap）的静态防御以及防御塔的动态防御，这两类方法都需要消耗**能量**。此外，powerCreep 的技能也可以作为辅助战斗手段，目前已知的技能会带来 **ops** 消耗。因此，充足的**能量**、**化合物**和 **ops** 是自己**发动进攻的必要前提**，同理也是敌人**有效组织防御的必要条件**。

**削减敌方战争资源**是我们的第一种也是最根本的一种取胜方式。

面对大佬或者堕落帝国（比如Muon）庞大的国土，榨干敌方全局资源的战争目的会因为路程过远和己方资源有限等原因无法实现。但反过来我们也可以利用**路程分隔**和**局部资源差异**，创造局部战力差异，对敌方房间进行**各个击破**，类似的思想在军事理论中并不少见。“故用兵之法，十则围之，五则攻之，倍则分之”——《孙子兵法》。

**创造局部非对称战争**是我们第二种取胜方式。敌方防御能力弱小导致己方随便出兵就能获得战斗力优势，也归入此类情况。

Screeps 中一切行为都需要计算力来执行，战争带来的临时额外 cpu 开销往往会使玩家开始**消耗 bucket**，当 bucket 耗尽则需要在削减资源采集量和削减战斗力之间做抉择，而削减资源采集量最终结果也是资源库存耗尽后削减战斗力。除了 cpu 以外，多数玩家面对战争还需要临时调整代码，这也是人脑计算力开销，每个人的精力都是有限的，在长期透支身体的“bucket”后也必然无法维持战斗力。

**榨干敌方计算力**是我们第三种取胜方式。

## 一. 全局资源战争
<img align="middle" src="./imgs/invasion1.png" width=400>

在 Screeps 中一般来说每个人的资源储量都足以让他生产不止一波战斗 creeps，并且除非已经把敌人家里拆干净了否则也拆不到 storage 等储存战争资源的建筑，因此基本不可能只通过一波兵力就达到耗尽敌方资源的效果。资源消耗战是一个需要精打细算**提升自己资源性价比、降低敌方资源性价比的**的持久过程。

### 磨墙
<img align="middle" src="./imgs/invasion2.png" width=600>

进攻没有墙的房间不需要战术~~（误）~~，能对墙（建筑物）造成伤害的 creep 部件有3种。WORK 每 tick 拆除 
50hits，折算成对方修墙的能量就是**0.5**，ATTACK 每 tick 伤害30折算能量**0.3**。RANGED_ATTACK 
单体攻击折算**0.1**，AOE攻击则以单层直线连续 rap 为例，贴身AOE伤害是 3×10+2×4+2×1 = 40 折算能量0.4，**高于 ATTACK**，间隙1格时AOE有 
5×4+2×1 = 22 的伤害仍**比自身单体攻击高**，间隙2格时AOE才弱于单体攻击。AOE不会对中立建筑造成伤害，因此**不会对 StructureWall 造成伤害**，如果有多层 
rap 则AOE的总伤害**会比 WORK 还高**。

三级化合物 boost 能使上述三种部件的工作效率提升至**基础值的4倍**，简单起见我们把防御方修墙能量与进攻方出兵能量视为成本，按最常见的 
10TOUGH+10MOVE+30有效部件 的配置来计算有下表（计入 boost 所需能量，奶妈以 10TOUGH+10MOVE+30HEAL 计）：

回本时间（tick）|WORK|ATTACK|贴身AOE|间隙1格AOE|RANGED单体
:-|:-:|:-:|:-:|:-:|:-:
自身回本|77|112|128|232|509
1:1带奶妈|229|364|317|576|1267

绝大多数情况下奶妈是必带的，那么拆墙时间小于 1267ticks 即路上准备时间大于 233ticks 的 RANGED_ATTACK 
攻击是亏本的，其他情况也同理考虑路程对交换比的影响。在实战中如果对方会出战斗 creep 
用于防御，那么我们通常**无法贴近墙边**（会被打死），此时**间隙1格的AOE**是对 rap 
**最高效**的攻击方式，在敌人的防御间隙还可以贴上去打出比 ATTACK 更高的AOE伤害。如果敌方是刷高 StructureWall 来防御的话，就需要靠 WORK 或者 ATTACK 冲锋了，StructureWall 对防御方 creep 的站位阻碍也构成一种平衡。

机智的防御方会捡取敌方 WORK 拆墙掉落的能量，改变能量交换比。

### 诱塔
<img align="middle" src="./imgs/invasion3.png">

Tower 攻击房间中无论多远的目标都是每次消耗10能量，8级房6个塔同时开火的能量消耗是 source 
基础生产率的**3倍**，只要我们吸引敌方防御塔频繁开火那他很快就一滴都没有了！众所周知奶妈的 heal 
不需要额外能量，我们找个偏远的角落一直奶住不就好啦！

比较骚的做法是在房间入口吸引火力（如上图），利用游戏机制自动跨房跳动。这样一是奶妈在隔壁房，别人只能打你送进去的 creep 而没有选择，二是在敌方房间每次只呆 1tick，遇到变故也能马上脱离。

Tower draining 是比较常见的战术，有经验的玩家会不攻击这样具有明显欺骗性的 creep，不过~~道高一尺魔高一丈~~，下文中会介绍针对性的改进战术。

### 骚扰外矿
<img align="middle" src="./imgs/invasion4.png">

相邻房间作为外矿的能量收益基本与房内 source 相同，打击敌人外矿能极大限制敌方能量收入，骚扰外矿也是游戏中常见的战争行为。

除了削减敌方收入以外，骚扰敌人外矿还很可能吸引敌人出更多的平民 creep （矿工、运输工、reserver）和战斗 creep （守卫外矿），和引诱防御塔类似，这也是在增加敌人的能量支出。如果我们能通过比如**高效击杀敌方creep**、**破坏道路**等方式吸引敌方花费大量能量在修复和守卫外矿上，这个收入与支出的双重打击将重创敌方经济。

依赖于外矿能量收入的代码，比如 OverMind，只要封锁全部外矿就会被饿死。

### 破坏重建
<img align="middle" src="./imgs/invasion5.png" width=470>

拆毁房间建筑后敌方的 controller 仍然需要很长时间才会掉级，这段时间内敌方可以依靠自己其他房间或者他友军房间进行重建，如果没有开启 safemode 的话重建的过程中敌方是比较脆弱的。每个高级建筑动不动就价值50k、100k能量，即使是便宜的 extension 数量多了成本也很可观，在没有 rap 的情况下我们进去逛一圈就能让敌人辛辛苦苦重建的成果付之一炬。

一般敌方会在房间中原地采集能量进行重建，拆毁重建的建筑物不会对敌方其他房间的战斗力造成显著影响，但是我们也可以像骚扰外矿一样通过**围城打援**的战术消灭敌方 
creep，从而间接削减敌人其他房间的能量。如果敌人不打算复建的话，**派带 CLAIM 部件的 creep 去 attackController** 
能大大加速敌方掉级，房间掉级后敌人再想重建就要在升级上额外花费大量能量。

### 垄断市场
<img align="middle" src="./imgs/invasion6.png" width=470>

在敌方 credit 充裕的情况下，即使我们采取各种精密的战术阻碍敌方采集资源，敌人也可以从市场上瞬间补齐所需，全局资源战争也就离不开钱钱钱的较量。联盟之间的战争往往会引发市场上战争资源价格暴涨数倍，财力更加雄厚的一方可以采取挂天价 buy 单同时扫货的方式垄断市场。

除了对战争资源进行抬价以外，在 SUN 与 YP 的联盟战争中，还出现了抛售 Subscription Token 进行压价的行为，阻碍敌人通过现实世界货币买 Token 换取 credit，我只能说一个字：壕！

<img align="middle" src="./imgs/invasion7.jpg">

## 二. 局部歼灭战争
消耗敌人全局资源虽然是理论上最彻底的胜利方式，但是在 Screeps 世界中生效速度比较慢，还会因为战斗 creep 一生只能走1500步的限制而无法对面积广阔的帝国奏效，我们需要一些局部打得爽的玩法~。~~爽就完事了~~

### 围城与 powerCreep
<img align="middle" src="./imgs/invasion8.png" width=400>

### 利用地形

### 传送门

## 三. 计算力战争

### 榨干 bucket 

#### a.诱塔 

#### b.草木皆兵

### 疲劳战术