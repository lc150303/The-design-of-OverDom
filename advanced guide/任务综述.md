<img align="middle" src="./imgs/title.png">
  
QQ群：565401831  
游戏介绍及入手请移步：[hoho大佬简书教程](https://www.jianshu.com/p/5431cb7f42d3)  
[系列目录](https://zhuanlan.zhihu.com/p/104412058)  
Version：1.0  
Author：Scorpior

# Screeps 任务设计

## 引言
[OverMind](https://github.com/bencbartlett/Overmind/wiki/Tasks) 中就已经有了内容庞大的任务系统，是谁第一个在 Screeps 
游戏中首先提出任务机制的已经不得而知（有谁知道的可以告诉我），但非常确定的是**任务驱动是 Screeps 中一种非常强大的逻辑控制方式**。

“任务”并不是一个前所未有的概念，具体到编程中其实一个任务就是用一个结构体或者对象把一份工作的信息保存起来，直到这份工作被完成或者不再需要进行。从计算机专业的角度很容易理解，保存数据就意味着**节约了反复计算这个数据的** 
**cpu 消耗**，这是任务驱动的第一个收益。

此外，将数据保存起来后，也就可以按自己的需要共享给任何其他对象或其他模块读取，因此**算出数据的对象和使用数据的对象可以解耦合**。解耦合意味着我们可以根据实时需求而非常方便地**替换**算出数据的对象或使用数据的对象，也意味着**用新功能的对象替换原有对象**同样方便。因此任务驱动让代码可以**根据实时需求灵活改变行为**，还能**节省添加新功能的工作量**，这是任务驱动的第二个收益。

还有一个容易被忽视的点是，多种工作的数据都以任务的形式保存起来后，我们也就可以根据所有这些工作数据来**分析帝国整体状态**，再根据这些状态**灵活调整不同工作的优先级或者工作量**。以各种方式记录游戏数据都可以做到这一点，任务是其中之一，这是任务驱动的第三点收益。

在[运输模式](运输模式b.md)中我已经展示了一种任务驱动的工作方式，本篇打算从个人视角来分析**游戏中有哪些功能可以使用任务驱动**、**任务机制的组成部分**和**不同形式任务的优缺点**。

## 物流系统：让萌新们开始思考任务
每一大佬都首先是一个萌新，每一个萌新最开始都没有任务系统。那么一个玩家啥时候最可能开始考虑使用任务系统呢？看到这篇文章的各位应该都经历了这个过程——有一天忽然发现搬运物资的工作逻辑写不出来了！这一切的起因都是 dev 
让大家的 rcl 升得太快了~~（大误）~~，但既然无法改变 dev，我们只能自己解决这个问题。


## 出生队列：当它需要帮别的房间生产 creep

## powerCreep：技能太多，dev 背锅

## 殖民与战争：任务影响了不止一个人（creep）